"use strict";var restaurant,newMap;"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(e){console.log("Service Worker Registration Successful: ")}).catch(function(e){console.log("Service Worker Registration Failed: "+e)}),document.addEventListener("DOMContentLoaded",function(e){initMap()}),initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1Ijoic293bWl5YTA3IiwiYSI6ImNqaWlncXA1dDAxeXMza282amNoNmxpYWwifQ.agqacoaXXdIOUhxxL8zvYg",maxZoom:18,attribution:'Map data &copy; <a tabindex="-1" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})},fetchRestaurantFromURL=function(a){if(self.restaurant)a(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),a(null,t)):console.error(e)}):(error="No restaurant id in URL",a(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("restaurant-name");t.tabIndex=0,t.innerHTML='<i class="material-icons">restaurant_menu</i> '+e.name;var a=document.getElementById("restaurant-address");a.tabIndex=0,a.innerHTML='<i class="material-icons">room</i>'+e.address;var n=document.getElementById("restaurant-img");n.tabIndex=0,n.alt="Image showing the view of "+e.name+" restaurant",n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e);var r=document.getElementById("restaurant-cuisine");r.tabIndex=0,r.innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var a in t.tabIndex="0",t.setAttribute("aria-label","Restaurant Operating hours"),e){var n=document.createElement("tr");n.tabIndex="0";var r=document.createElement("td");r.innerHTML=a,n.appendChild(r);var i=document.createElement("td");i.innerHTML=e[a],n.appendChild(i),t.appendChild(n)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),a=document.createElement("h2");if(a.innerHTML="Reviews",a.tabIndex=0,t.setAttribute("aria-label","Following are the list of reviews"),t.appendChild(a),!e){var n=document.createElement("p");return n.innerHTML="No reviews yet!",n.tabIndex=0,void t.appendChild(n)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)},createReviewHTML=function(e){var t=document.createElement("li"),a=document.createElement("p");a.tabIndex=0,a.innerHTML='<i class="material-icons">perm_identity</i> '+e.name,t.appendChild(a);var n=document.createElement("p");n.tabIndex=0,n.innerHTML='<i class="material-icons">calendar_today</i> '+e.date,t.appendChild(n);var r=document.createElement("p");r.innerHTML="Rating: ".concat(e.rating)+'<i class="material-icons">star</i>',r.tabIndex=0,t.appendChild(r);var i=document.createElement("p");return i.innerHTML=e.comments,i.tabIndex=0,t.appendChild(i),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),a=document.createElement("li");a.innerHTML=e.name,t.appendChild(a)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null};